<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                template="./../controlpanel_template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:define name="head">
        <h:outputScript name="/js/Chart.js" />
        <script src="http://code.highcharts.com/highcharts.js" />
        <!--<h:outputScript name="/js/highcharts.js" />-->
    </ui:define>
    <ui:define name="content">
        <legend>Complaints</legend>
        <p>
            Number of complaints
            <div id="complaintStatistic" width="800" height="400" class="span12"></div>
        </p>
        <p>
            Total unresolved complaints: #{requestUI.unresolvedComplaint.size()}
        </p>
        <legend>Requests</legend>
        <p>
            Number of requests
            <div id="requestStatistic" width="800" height="400" class="span12"></div>
        </p>        
        <p>
            Total unresolved requests: #{requestUI.unresolvedRequest.size()}
        </p>
        <div id="labUsageStatistic" width="800" height="400" class="span12"></div>
        <script>
            $('#complaintStatistic').highcharts({
                chart: {
                    type: 'area'
                },
                title: {
                    text: 'Complaint Statistic'
                },
                subtitle: {
                    text: 'Base on how many complaint sent on that day'
                },
                xAxis: {
                    title: {text: 'Date'},
                    categories: #{requestUI.complaintStatisticByDay.keySet()}
                },
                yAxis: {title: {text: 'Requests'}},
                series: [{
                        data: #{requestUI.complaintStatisticByDay.values()},
                        name: 'All users'
                    }]
            });
            $('#labUsageStatistic').highcharts({
                chart: {
                    type: 'area'
                },
                title: {
                    text: 'Lab Usage'
                },
                subtitle: {
                    text: 'Base on how many time the lab used on that day'
                },
                xAxis: {
                    title: {text: 'Date'},
                    categories: #{labUI.labUsageStatistic.keySet()}
                },
                yAxis: {title: {text: 'Using Time'}},
                series: [{
                        data: #{labUI.labUsageStatistic.values()},
                        name: 'All labs'
                    }]
            });
        </script>
    </ui:define>

</ui:composition>
