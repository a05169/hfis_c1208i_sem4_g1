<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                template="./../controlpanel_template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="content">
        <p>
            Number of complaints in the last 5 days
            <canvas id="myChart" width="800" height="400" class="span12"></canvas>
        </p>
        <script>
            var data = {
                labels: #{requestUI.complaintStatisticByDay.keySet()},
                datasets: [
                    {
                        label: "My First dataset",
                        fillColor: "rgba(220,220,220,0.2)",
                        strokeColor: "rgba(220,220,220,1)",
                        pointColor: "rgba(220,220,220,1)",
                        pointStrokeColor: "#fff",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(220,220,220,1)",
                        data: #{requestUI.complaintStatisticByDay.values()}
                    }
                ]
            };
            var ctx = document.getElementById("myChart").getContext("2d");
            var myLineChart = new Chart(ctx).Line(data, {bezierCurve: false});
        </script>
        <p>
            Number of unresolved complaints: #{requestUI.unresolvedComplaint.size()}
        </p>
        <!--        <ui:repeat value="{requestUI.complaintStatisticByDay.keySet().toArray()}" var="integer">
                    <h:outputText value="{integer}" />
                    <h:outputText value="{requestUI.complaintStatisticByDay.get(integer)}" />
                </ui:repeat>-->
    </ui:define>

</ui:composition>
